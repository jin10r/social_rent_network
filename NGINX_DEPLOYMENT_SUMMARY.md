# üéØ Nginx Reverse Proxy - –ò—Ç–æ–≥–∏ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –£–¥–∞–ª–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚ùå –£–¥–∞–ª–µ–Ω `docker-compose.server.yml`
- ‚ùå –£–¥–∞–ª–µ–Ω `docker-compose.local.yml`  
- ‚ùå –£–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### 2. –°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π docker-compose.yml
- ‚úÖ **Nginx** - reverse proxy –Ω–∞ –ø–æ—Ä—Ç—É 8080 (–µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
- ‚úÖ **Backend** - FastAPI –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º –ø–æ—Ä—Ç—É 8001
- ‚úÖ **Frontend** - React –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º –ø–æ—Ä—Ç—É 3000
- ‚úÖ **Database** - PostgreSQL —Å PostGIS
- ‚úÖ **Bot** - Telegram bot

### 3. –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ nginx routing

```
Client ‚Üí Nginx:8080 ‚Üí Services
         ‚îÇ
         ‚îú‚îÄ /api/*  ‚Üí Backend:8001   (FastAPI API)
         ‚îú‚îÄ /health ‚Üí Backend:8001   (Health check)
         ‚îú‚îÄ /docs   ‚Üí Backend:8001   (Swagger docs)  
         ‚îî‚îÄ /*      ‚Üí Frontend:3000  (React app)
```

### 4. –°–æ–∑–¥–∞–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ `nginx.conf` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è reverse proxy
- ‚úÖ `.env` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `validate-config.sh` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ `test-nginx-proxy.sh` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ proxy
- ‚úÖ `DEPLOYMENT.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 5. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `README.md` —Å –Ω–æ–≤—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã `.env.example` —Ñ–∞–π–ª—ã –≤ backend –∏ frontend
- ‚úÖ API –∫–ª–∏–µ–Ω—Ç —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ nginx

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑: ‚úÖ 46/46 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ (100%)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx
- ‚úÖ Docker Compose –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ Backend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ Frontend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: –û–¢–õ–ò–ß–ù–û
Nginx reverse proxy –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–æ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
./validate-config.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose up -d

# 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å proxy
./test-nginx-proxy.sh

# 4. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
http://localhost:8080
```

### –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º
- **–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: http://localhost:8080
- **Backend API**: http://localhost:8080/api/
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: http://localhost:8080/docs
- **Health check**: http://localhost:8080/health

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 1. –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–µ–ø–ª–æ—è
- **–ë—ã–ª–æ**: 2 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö docker-compose —Ñ–∞–π–ª–∞
- **–°—Ç–∞–ª–æ**: 1 –µ–¥–∏–Ω—ã–π docker-compose.yml

### 2. –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- **–ë—ã–ª–æ**: Frontend:3000 + Backend:8001 
- **–°—Ç–∞–ª–æ**: –í—Å–µ —á–µ—Ä–µ–∑ Nginx:8080

### 3. –£–ª—É—á—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞–ø—Ä—è–º—É—é
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### 4. –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- Nginx –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- Load balancing –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- HTTP/2 –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 5. –ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ HTTPS
- –û–¥–∏–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è nginx
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è SSL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
docker compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker compose logs -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ nginx
docker compose restart nginx

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤  
docker compose down
```

## üåç –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞

### 1. –û–±–Ω–æ–≤–∏—Ç–µ .env –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞:
```env
ENVIRONMENT=production
WEBAPP_URL=https://yourdomain.com
REACT_APP_BACKEND_URL=https://yourdomain.com
SECRET_KEY=your_super_secret_key
POSTGRES_PASSWORD=strong_password
```

### 2. –î–æ–±–∞–≤—å—Ç–µ SSL –≤ nginx.conf:
```nginx
server {
    listen 443 ssl;
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    # ... rest of config
}
```

## ‚ú® –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!** 

Nginx reverse proxy –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø—Ä–æ–µ–∫—Ç Social Rent App:
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –ª–∏—à–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ docker-compose
- ‚úÖ –°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π docker-compose.yml —Å nginx
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ—é

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ `http://localhost:8080` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±–µ–∫–µ–Ω–¥–æ–º.