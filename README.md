# Social Rent App

–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –¥–ª—è –ø–æ–∏—Å–∫–∞ –∂–∏–ª—å—è –∏ —Å–æ—Å–µ–¥–µ–π —á–µ—Ä–µ–∑ Telegram Web App.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ï–¥–∏–Ω—ã–π Docker Compose —Å–æ –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏:**
- **nginx** - —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- **frontend** - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Telegram WebApp)  
- **backend** - FastAPI + PostgreSQL + PostGIS
- **bot** - Telegram –±–æ—Ç (aiogram)
- **db** - PostgreSQL —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º PostGIS

**–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ nginx:**
- `/` - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `/api/*` - API –∑–∞–ø—Ä–æ—Å—ã –∫ backend
- `/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è backend

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok URL

–ò–∑–º–µ–Ω–∏—Ç–µ URL –≤ —Ñ–∞–π–ª–µ `.env`:

```env
WEBAPP_URL=https://your-ngrok-url.ngrok-free.app
REACT_APP_BACKEND_URL=https://your-ngrok-url.ngrok-free.app
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f backend
docker-compose logs -f frontend
docker-compose logs -f nginx
docker-compose logs -f bot
docker-compose logs -f db

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å ngrok –¥–ª—è –ø–æ—Ä—Ç–∞ 80 (nginx)
ngrok http 80

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å HTTPS URL –∏ –æ–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker-compose restart
```

## üîß –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
   - –í—ã–±–æ—Ä —Å—Ç–∞–Ω—Ü–∏–∏ –º–µ—Ç—Ä–æ —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—é–¥–∂–µ—Ç–∞ –∏ —Ä–∞–¥–∏—É—Å–∞ –ø–æ–∏—Å–∫–∞

2. **–°–∏—Å—Ç–µ–º–∞ –º–∞—Ç—á–∏–Ω–≥–∞**
   - –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–º–∏—Å—è –∑–æ–Ω–∞–º–∏ –ø–æ–∏—Å–∫–∞
   - –õ–∞–π–∫–∏ –∏ –≤–∑–∞–∏–º–Ω—ã–µ –º–∞—Ç—á–∏
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø—Ä–∏ –º–∞—Ç—á–µ

3. **–û–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
   - –õ–∞–π–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏—Ö—Å—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

4. **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è 1000 –æ–±—ä—è–≤–ª–µ–Ω–∏–π
   - –†–∞–Ω–¥–æ–º–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ú–æ—Å–∫–≤—ã
   - –ü—Ä–∏–º–µ—Ä—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π (–ª–∞–π–∫–∏, –º–∞—Ç—á–∏)

### üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**PostgreSQL + PostGIS —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏:**
- `users` - –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `listings` - –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏  
- `user_likes` - –ª–∞–π–∫–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `user_matches` - –≤–∑–∞–∏–º–Ω—ã–µ –º–∞—Ç—á–∏
- `listing_likes` - –ª–∞–π–∫–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–π

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# Health check
curl http://localhost/health
```

### –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker-compose exec db psql -U postgres -d social_rent

# –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö
# SELECT COUNT(*) FROM users;
# SELECT COUNT(*) FROM listings;
# SELECT COUNT(*) FROM user_matches;
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
docker-compose restart backend
docker-compose logs -f backend
```

### –û—Ç–ª–∞–¥–∫–∞

```bash
# –õ–æ–≥–∏ nginx (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
docker-compose logs nginx

# –õ–æ–≥–∏ backend (API)
docker-compose logs backend

# –õ–æ–≥–∏ frontend (React)
docker-compose logs frontend

# –õ–æ–≥–∏ –±–æ—Ç–∞
docker-compose logs bot
```

## üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–î–ª—è production –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `.env`:

```env
SECRET_KEY=your-strong-secret-key-here
POSTGRES_PASSWORD=strong-database-password
ENVIRONMENT=production  
LOG_LEVEL=WARNING
ALLOWED_ORIGINS=https://your-domain.com
```

## üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### CORS –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `REACT_APP_BACKEND_URL` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- nginx –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è API

### Telegram WebApp –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `WEBAPP_URL` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HTTPS
- URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ (–Ω–µ localhost)
- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç 80
- –í—Å–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Docker —Å–µ—Ç—å

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs db`
- –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–ª–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 1-2 –º–∏–Ω—É—Ç—ã)

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ngrok –¥–ª—è –ø–æ—Ä—Ç–∞ 80
2. –û–±–Ω–æ–≤–∏—Ç–µ WEBAPP_URL –≤ .env
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
4. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram (@your_bot_username)
5. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
6. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å –∏ –Ω–∞—á–Ω–∏—Ç–µ –ø–æ–∏—Å–∫ —Å–æ—Å–µ–¥–µ–π!

---

**–¢–æ–∫–µ–Ω –±–æ—Ç–∞:** `8482163056:AAGYMcCmHUxvrzDXkBESZPGV_kGiUVHZh4I`