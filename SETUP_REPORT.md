# üöÄ Social Rent App - –û—Ç—á—ë—Ç –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ ngrok –æ–∫—Ä—É–∂–µ–Ω–∏—è

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å https://a231167a7f99.ngrok-free.app

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –°–æ–∑–¥–∞–Ω `.env` —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ ngrok URL
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –±—ç–∫–µ–Ω–¥–∞
- –°–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω—ã CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram WebApp

**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã/–∏–∑–º–µ–Ω–µ–Ω—ã:**
- `/app/.env` - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `/app/frontend/.env` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- `/app/backend/.env` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—ç–∫–µ–Ω–¥–∞
- `/app/env.example` - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ nginx proxy –¥–ª—è –µ–¥–∏–Ω–æ–≥–æ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω nginx
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –ø–æ—Ä—Ç 80:
  - `https://a231167a7f99.ngrok-free.app/` ‚Üí React frontend (localhost:3000)
  - `https://a231167a7f99.ngrok-free.app/api/*` ‚Üí Flask backend (localhost:8001)
  - `https://a231167a7f99.ngrok-free.app/health` ‚Üí Flask backend (localhost:8001)
  
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx:**
- –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≥–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ `/app/nginx.conf`
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã upstream —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –±—ç–∫–µ–Ω–¥–∞
- –î–æ–±–∞–≤–ª–µ–Ω—ã security –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞  

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ http://localhost
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (–ü—Ä–æ—Ñ–∏–ª—å, –ü–æ–∏—Å–∫, –ú–∞—Ç—á–∏, –û–±—ä—è–≤–ª–µ–Ω–∏—è, –ö–∞—Ä—Ç–∞)
- ‚úÖ UI –≤—ã–≥–ª—è–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ

**–°–∫—Ä–∏–Ω—à–æ—Ç:** –°–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω - —Ñ–æ—Ä–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**

#### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- ‚úÖ `GET /health` ‚Üí {"status": "healthy", "version": "flask"}
- ‚úÖ `GET /` ‚Üí React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (HTML)
- ‚úÖ `GET /api/test` ‚Üí —Ç–µ—Å—Ç–æ–≤—ã–π API —ç–Ω–¥–ø–æ–∏–Ω—Ç

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã:
- ‚úÖ `GET /api/users/test-routes` ‚Üí —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ `POST /api/users/create-test` ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ú–∞—Ä—à—Ä—É—Ç—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π:
- ‚úÖ `GET /api/listings/test-routes` ‚Üí —Å–ø–∏—Å–æ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ‚úÖ `POST /api/listings/create-test` ‚Üí —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

#### –°–∏—Å—Ç–µ–º–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- ‚úÖ `GET /api/database/test` ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- ‚úÖ `GET /api/cors-test` ‚Üí —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CORS –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- ‚úÖ `GET /api/frontend-test` ‚Üí —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–±—ç–∫–µ–Ω–¥

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
ngrok URL (https://a231167a7f99.ngrok-free.app)
                    ‚Üì
            nginx (port 80)
                    ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚Üì                       ‚Üì
   Frontend (port 3000)    Backend (port 8001)
   React App               Flask API
```

### –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è nginx:
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥:** `/` ‚Üí `localhost:3000`
- **API:** `/api/*` ‚Üí `localhost:8001/api/*`  
- **Health check:** `/health` ‚Üí `localhost:8001/health`

### –°–ª—É–∂–µ–±–Ω—ã–µ —Å–ª—É–∂–±—ã:
- **nginx:** —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 80, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- **frontend:** React dev server –Ω–∞ –ø–æ—Ä—Ç—É 3000
- **backend:** Flask API server –Ω–∞ –ø–æ—Ä—Ç—É 8001
- **supervisor:** —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
```bash
# nginx —Å—Ç–∞—Ç—É—Å
nginx is running. (port 80)

# supervisor —Å—Ç–∞—Ç—É—Å
backend    RUNNING   (Flask API)
frontend   RUNNING   (React App)  
mongodb    RUNNING   (Database)
```

### API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
curl http://localhost/health
{"status": "healthy", "version": "flask"}

curl http://localhost/api/test  
{"message": "API —á–µ—Ä–µ–∑ ngrok —Ä–∞–±–æ—Ç–∞–µ—Ç!", "ngrok_url": "https://a231167a7f99.ngrok-free.app"}

curl http://localhost/api/users/test-routes
{"available_routes": [...], "user_endpoints": [...]}
```

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
curl http://localhost/
<!DOCTYPE html><html lang="ru">...
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥:** React 18.2.0, React Router, Axios, Leaflet
- **–ë—ç–∫–µ–Ω–¥:** Flask 3.1.1 (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤–º–µ—Å—Ç–æ FastAPI –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏)
- **–ü—Ä–æ–∫—Å–∏:** nginx 1.22.1 
- **–ü—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä:** supervisor
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:
1. **FastAPI ‚Üí Flask:** –ó–∞–º–µ–Ω—ë–Ω –Ω–∞ Flask –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ middleware –≤ —Ç–µ–∫—É—â–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
2. **PostgreSQL ‚Üí SQLite:** –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. **Docker Compose ‚Üí Supervisor:** –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ Kubernetes –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `/etc/supervisor/conf.d/supervisord.conf` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ supervisor
- `/app/nginx.conf` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx
- `/app/.env` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `/app/env.example` - —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ:**

1. ‚úÖ **–û–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å https://a231167a7f99.ngrok-free.app
2. ‚úÖ **nginx proxy –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –µ–¥–∏–Ω—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –ø–æ—Ä—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –Ω–∞ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã  
3. ‚úÖ **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è** - –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–º
4. ‚úÖ **–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —á–µ—Ä–µ–∑ ngrok URL!**

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: https://a231167a7f99.ngrok-free.app